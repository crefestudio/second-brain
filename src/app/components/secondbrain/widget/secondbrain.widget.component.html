<div class="view-wrapper">
  <div class="center-box">
    <!-- connect-button -->
    <div *ngIf="state=='connect-button'">
      <button class="connect-btn" (click)="onClickConnectBtn()">
        CONNECT
      </button>
    </div>
    
    <!-- <div *ngIf="state=='connect-client'">
        회원가입 됨 => 유저 이름 표시 가능
        이 클라이어트 연결이 안된 상태
        전체 클라이언트 연결 상태 표시 / 연결 끊기 버튼 
        보안을 위해서 가능한 '연결 끊기' 상태로 해두기
        연결끊기 후 다시 이메일인증하면 연결됨

        => 전체 연결 끊기 (노션 연결 포함해서) 
        => 이 장치만 연결 끊기

        1. clientId없이 불린 경우 
        웹에서 클라이언트 url을 생성함 => 클라이언트에서 등록함 Notionable/secondbrain/clientId [ 복사 ]
        오른쪽 상단 메뉴에 '...' 클릭 > 바꾸기 선택 후 '붙여넣기'

        2. clientId있는 상태로 불린 경우  
        
        Notionable/secondbrain/clientId에서 서버에서 발행한 clientId 인증키 localhost에 등록 
        이 인증키는 보안상 1주일간 유효합니다.
      
        로그인 / 로그아웃

        이 장치에서만 로그아웃합니다.
    </div> -->
    

    <!-- <div *ngIf="state=='session'">
      session - 인증은 되었는데 API연동은 아직 안된 상태
      모바일앱이라면 최초 연동은 데스크탑에서 진행해야 함
      인증 되었으니 데스크탑에서 연동하면 리로드하면 연결 될 것임
    </div> -->
    <!-- connect-notion -->
    <ng-container *ngIf="state=='connect-notion'">
      <div class="connect-container">
        <div class="info-text"
          style="display:block;padding: 8px 16px; line-height: 1.5em; font-size: 0.875rem; color:#ffffff; margin-bottom: 0px;font-size: 16px;">
          <strong>브라우저에 열린 창에서 연결작업을 완료한 후,<br>아래 버튼을 눌러주세요.</strong><br>
        </div>
        <div class="input-group" style="display:flex; gap: 8px; padding: 0 16px;font-size: 14px;">
          <button class="connect-btn" (click)="onClickCheckConnecttBtn()">
            연결 확인
          </button>
        </div>
        <br>
        <small class="info-text"
              style="display:block; padding: 8px 16px; line-height: 1.5em; font-size: 12px; color: #959595; margin-bottom: 18px; text-align: left;">
          • <span style="color: #fd5712;">노션 모바일 앱에서는 새 창이 열리지 않아 연결을 완료 할 수 없습니다.</span><br/>
          • <span style="color: #fd5712;">세컨드브레인 API를 처음 연결 하실 때는 <strong>웹브라우저</strong> 환경에서만 진행할 수 있습니다.</span><br/>
          • 기타 API 연결 및 이용 관련 문의는 <strong>toto791&#64;gmail.com</strong>으로 연락해 주세요.<br/>
        </small>
      </div>
    </ng-container>

    <!-- emial -->
    <ng-container *ngIf="state=='email-input'">
      <div class="connect-container">
        <div class="info-text"
          style="display:block;padding: 0 16px; line-height: 1.0em; font-size: 0.875rem; color:#ffffff; margin-bottom: 0px;font-size: 16px;">
          <strong>LifeUp • SecondBrain API</strong><br><br>
        </div>
        <small class="info-text"
          style="display:block; padding: 0 16px; line-height: 1.5em; font-size: 0.875rem; color: #aaaaaa; margin-bottom: 18px;font-size: 12px;">
          API 연결을 위해 템플릿 <span style="color: #e17245;">구매 시 등록한 이메일</span>을 입력해주세요.<br />  
        </small>
        <div class="input-group" style="display:flex; gap: 8px; padding: 0 16px;">
          <button class="back-btn" (click)="goBackState()" title="뒤로가기"
            style="background:none; border:none; padding:0; cursor:pointer;">
            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor">
              <path d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"></path>
              <path
                d="m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z">
              </path>
            </svg>
          </button>
          <input type="text" placeholder="이메일을 입력해주세요." [(ngModel)]="email"
            style="padding: 8px; font-size: 1rem; border-radius: 6px; border: 1px solid #ccc; width: 14ch; box-sizing: border-box;width: 24ch;font-size: 13px;" />
          <button [disabled]="isEmailSending" 
                  (click)="onSubmitEmail()"
                  [ngClass]="{'btn-disabled': isEmailSending, 'btn-active': !isEmailSending}">
            확인
          </button>
        </div>
        <br/>
        <small class="info-text"
              style="display:block; padding: 0 16px; line-height: 1.5em; font-size: 12px; color: #959595; margin-bottom: 18px; text-align: left;">
          • <span style="color: #b34347;">세컨드브레인 API를 처음 연결 하실 때는 <strong>웹브라우저</strong> 환경에서만 진행할 수 있습니다.</span><br/>
          • <span style="color: #b34347;">연결 후 <strong>모바일 장치</strong>에서 추가 연결 할 수 있으며, 각 장치에서는 보안상 별도 인증이 필요합니다.</span><br/>
          • 세컨드브레인 API는 노션 계정당 LifeUp 템플릿 1개만 사용 가능합니다. 연결 할 때 이용 할 템플릿을 선택해주세요.<br/>
          • 구매 시 등록한 이메일을 잊어버린 경우, 현재 사용 중인 이메일로 먼저 연결 한 후 관리자에게 문의해주세요.<br/>
          • 기타 API 연결 및 이용 관련 문의는 <strong>toto791&#64;gmail.com</strong>으로 연락해 주세요.<br/>
        </small>


      </div>
    </ng-container>

    <!-- certification -->
    <ng-container *ngIf="state=='email-certification'">
      <div class="connect-container">
        <div class="info-text"
          style="display:block;padding: 0 16px; line-height: 1.0em; font-size: 0.875rem; color:#ffffff; margin-bottom: 0px;font-size: 16px;">
          <strong>인증번호 확인</strong><br><br>
        </div>
        <small class="info-text"
          style="display:block; padding: 0 16px; line-height: 1.5em; font-size: 0.875rem; color: #aaaaaa; margin-bottom: 18px;font-size: 12px;">
          {{email}} 로 인증번호를 발송했습니다. 메일을 확인하신 수 인증번호 6자리를 입력해주세요.<br />
        </small>
        <div class="input-group" style="display:flex; gap: 8px; padding: 0 16px;">
          <button class="back-btn" (click)="goBackState()" title="뒤로가기"
            style="background:none; border:none; padding:0; cursor:pointer;">
            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor">
              <path d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"></path>
              <path
                d="m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z">
              </path>
            </svg>
          </button>

          <input class="code-input" type="text"  inputmode="numeric" pattern="[0-9]" maxlength="1" [value]="codeArray[0]" [disabled]="isVerifying" 
            (input)="onInputNumber($event, 0)" (keydown.backspace)="onBackspace($event, 0)"/>
          <input class="code-input" type="text"  inputmode="numeric" pattern="[0-9]" maxlength="1" [value]="codeArray[1]" [disabled]="isVerifying" 
            (input)="onInputNumber($event, 1)" (keydown.backspace)="onBackspace($event, 1)"/>
          <input class="code-input" type="text"  inputmode="numeric" pattern="[0-9]" maxlength="1" [value]="codeArray[2]" [disabled]="isVerifying" 
            (input)="onInputNumber($event, 2)" (keydown.backspace)="onBackspace($event, 2)"/>
          <input class="code-input" type="text"  inputmode="numeric" pattern="[0-9]" maxlength="1" [value]="codeArray[3]" [disabled]="isVerifying" 
            (input)="onInputNumber($event, 3)" (keydown.backspace)="onBackspace($event, 3)"/>
          <input class="code-input" type="text"  inputmode="numeric" pattern="[0-9]" maxlength="1" [value]="codeArray[4]" [disabled]="isVerifying" 
            (input)="onInputNumber($event, 4)" (keydown.backspace)="onBackspace($event, 4)"/>
          <input class="code-input" type="text"  inputmode="numeric" pattern="[0-9]" maxlength="1" [value]="codeArray[5]" [disabled]="isVerifying" 
            (input)="onInputNumber($event, 5)" (keydown.backspace)="onBackspace($event, 5)"/>
         

          <!-- <button (click)="onSubmitCertificationNumber()"style="padding: 8px 12px; font-size: 12px; border-radius: 6px; border:none; background:#007AFF; color:white; width:auto; flex-shrink:0;">
          확인
        </button> -->
        </div>
      </div>
    </ng-container>   

    <!-- phoneNumber -->
    <!-- <ng-container *ngIf="state=='phoneNumber'">
    <div class="connect-container">
      <div class="info-text" style="display:block;padding: 0 16px; line-height: 1.0em; font-size: 0.875rem; color:#ffffff; margin-bottom: 0px;font-size: 16px;">
        <strong>Notionable · SecondBrain API</strong><br><br>
      </div>
      <small class="info-text" style="display:block; padding: 0 16px; line-height: 1.5em; font-size: 0.875rem; color: #aaaaaa; margin-bottom: 18px;font-size: 12px;">
        API 연결을 위해 템플릿 구매 시 등록한 휴대폰 번호를 입력해주세요.<br/> 
        ※ 입력하신 번호는 API연결과 구매자 확인 용도로만 사용됩니다.
      </small>
      <div class="input-group" style="display:flex; gap: 8px; padding: 0 16px;">
        <button
          class="back-btn"
          (click)="goBackState()"
          title="뒤로가기"
          style="background:none; border:none; padding:0; cursor:pointer;"
        >
          <svg viewBox="0 0 1024 1024"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="currentColor">
            <path d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"></path>
            <path d="m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"></path>
          </svg>
        </button>
        <input
          type="tel"
          placeholder="구매 시 등록한 휴대폰 번호"
          [(ngModel)]="phoneNumber"
          (input)="formatPhoneNumber()"
          style="padding: 8px; font-size: 1rem; border-radius: 6px; border: 1px solid #ccc; width: 14ch; box-sizing: border-box;width: 24ch;font-size: 13px;"
        />
        <button (click)="onSubmitPhoneNumber()"style="padding: 8px 12px; font-size: 12px; border-radius: 6px; border:none; background:#007AFF; color:white; width:auto; flex-shrink:0;">
          확인
        </button>
      </div>
    </div>
  </ng-container> -->

    <!-- connectKey -->
    <!--    
  <ng-container *ngIf="state=='connectKey'">
    <div class="connect-container">
      <div class="info-text" style="display:block;padding: 0 16px; line-height: 1.0em; font-size: 0.875rem; color:#ffffff; margin-bottom: 0px;font-size: 16px;">
        <strong>Notionable · SecondBrain API</strong><br><br>
      </div>
      <small class="info-text" style="display:block; padding: 0 16px; line-height: 1.5em; font-size: 0.875rem; color: #aaaaaa; margin-bottom: 18px;font-size: 12px;">
        새 브라우저 창에서 SecondBrain API 연결을 완료한 뒤, 발급된 연결 키를 아래에 입력해 주세요. 
      </small>
      <div class="input-group" style="display:flex; gap: 8px; padding: 0 16px;">
        <button
          class="back-btn"
          (click)="goBackState()"
          title="뒤로가기"
          style="background:none; border:none; padding:0; cursor:pointer;"
        >
          <svg viewBox="0 0 1024 1024"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="currentColor">
            <path d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"></path>
            <path d="m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"></path>
          </svg>
        </button>

        <input
          type="tel"
          placeholder="연결키를 입력해주세요."
          [(ngModel)]="connectKey"
          style="padding: 8px; font-size: 1rem; border-radius: 6px; border: 1px solid #ccc; width: 14ch; box-sizing: border-box;width: 32ch;font-size: 13px;"
        />
        <button (click)="onSubmitConnectKey()"style="padding: 8px 12px; font-size: 12px; border-radius: 6px; border:none; background:#007AFF; color:white; width:auto; flex-shrink:0;">
          확인
        </button>
      </div>
    </div>
  </ng-container> -->

    <ng-container *ngIf="state=='change-client-url'">

      이 위치에 세컨드브레인 고유 위젯 주소입니다.
      이 주소를 현재 주소와 교체를 진행해야 다음단계로 노션 연결이 진행됩니다. 
      아래 주소를 복사해서 이 화면 우측 상단에 메뉴>바꾸기 를 한 후 주소를 붙여넣기 해주세요.

      https://notionable.net/secondbrain/widget/{{clientId}}

      secondbrain 인증, 클라이언트 인증 성공 / 아직 노션 연결은 안함
      위젯 주소 교체

    </ng-container>

    <!-- 연결 성공 표시 -->
    <ng-container *ngIf="state=='success'">
      <div class="success-wrapper">
        <div class="success-card">
          <h1 class="title">🎉 SecondBrain API 연결이 완료되었습니다.</h1>

          <p class="desc">
            아래 그래프 보기를 누르면 API 동작이 시작됩니다.<br>
          </p>

          <button class="home-btn" (click)="goGraph()">
            그래프 보기
          </button>
        </div>
      </div>
    </ng-container>


    <!-- 에러메세지 -->
    <div *ngIf="state !== 'graph'" class="error-message" [innerHTML]="errorMessage">
    </div>
    <div *ngIf="state !== 'graph'" class="warn-message" [innerHTML]="warnMessage">
    </div>

    <!-- 그래프 오류 - 데이터 없음 -->
    <ng-container *ngIf="state=='graph-nodata'">
      <div class="success-wrapper">
        <div class="success-card">
          <h1 class="title">⛔ 그래프를 표시할 데이터가 없습니다.</h1>

          <small class="info-text"
              style="display:block; padding: 0 16px; line-height: 1.5em; font-size: 13px; color: #959595; margin-bottom: 18px; text-align: left;">
            새 노트를 작성하면 AI가 내용을 분석해 키워드를 자동으로 생성하고, 완료 후 노트의 ‘키워드’ 속성에 표시됩니다.<br>
            생성된 키워드를 기반으로 그래프가 구성됩니다.<br><br>
            초기 연결 시 기존 노트는 자동 변환이 지원되지 않으며,<br>
            처리 시간 문제로 현재는 5개씩 수동 변환 방식으로 제공되고 있습니다.
          </small>

           <!-- <small class="info-text"
              style="display:block; padding: 0 16px; line-height: 1.5em; font-size: 12px; color: #959595; margin-bottom: 18px; text-align: left;">
          • <span style="color: #b34347;">세컨드브레인 API를 처음 연결 하실 때는 <strong>웹브라우저</strong> 환경에서만 진행할 수 있습니다.</span><br/>
          • <span style="color: #b34347;">연결 후 <strong>모바일 장치</strong>에서 추가 연결 할 수 있으며, 각 장치에서는 보안상 별도 인증이 필요합니다.</span><br/>
          • 세컨드브레인 API는 노션 계정당 LifeUp 템플릿 1개만 사용 가능합니다. 연결 할 때 이용 할 템플릿을 선택해주세요.<br/>
          • 구매 시 등록한 이메일을 잊어버린 경우, 현재 사용 중인 이메일로 먼저 연결 한 후 관리자에게 문의해주세요.<br/>
          • 기타 API 연결 및 이용 관련 문의는 <strong>toto791&#64;gmail.com</strong>으로 연락해 주세요.<br/>
        </small> -->

          <!-- <p class="desc">
            새로운 노트를 작성하면 AI가 내용을 분석해 자동으로 키워드를 생성하고,<br>
            작업이 완료되면 노트의 ‘키워드’ 속성에 반영됩니다.<br>
            이 키워드를 기반으로 세컨드 브레인 그래프가 생성됩니다.<br>

            초기 연결 시 기존 노트의 자동 변환 기능은 아직 준비 중입니다.<br>
            처리 시간이 소요되는 관계로, 현재는 한 번에 5개씩<br>
            아래 버튼을 눌러 수동으로 변환할 수 있습니다.
          </p> -->

          <button class="home-btn" (click)="onClickGenerateNotionNoteKMDataBatch()">
            AI 노트 데이터 전환하기 - 5개
          </button>
        </div>
      </div>
    </ng-container>


    <!-- 그래프 영역 -->
    <div class="graph-wrapper" [class.inactive]="state !== 'graph'">
      <div class="graph-container" #graphContainer>
      </div>

      <!-- 메뉴 -->
      <div class="graph-menu" *ngIf="isGraphMenuOpen" (click)="$event.stopPropagation()">
        <!-- 설정 -->
        <!-- <button class="menu-item" (click)="onSettings()">
          <span class="menu-icon">
            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M511.9 135.3L182.7 323.7v376.8l329.1 188.4L841 700.5V323.7L511.9 135.3z m256 522.8l-256 146.5-256-146.5v-292l256-146.5 256 146.5v292z"
                fill="#cfd0d3" />
              <path
                d="M365.6 512.1c0 80.8 65.5 146.3 146.3 146.3 80.8 0 146.3-65.5 146.3-146.3 0-80.8-65.5-146.3-146.3-146.3-80.8 0-146.3 65.5-146.3 146.3z m219.4 0c0 40.3-32.8 73.1-73.1 73.1s-73.1-32.8-73.1-73.1 32.8-73.1 73.1-73.1 73.1 32.8 73.1 73.1z"
                fill="#cfd0d3" />
            </svg>
          </span>
          <span class="menu-text">설정</span>
        </button> -->
        <!-- 노트-키워드 그래프 -->  
        <button class="menu-item" (click)="onClickGenerateNotionNoteKMDataBatch()">
          <span class="menu-icon">
            <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M4 4C4 3.44772 4.44772 3 5 3H14H14.5858C14.851 3 15.1054 3.10536 15.2929 3.29289L19.7071 7.70711C19.8946 7.89464 20 8.149 20 8.41421V20C20 20.5523 19.5523 21 19 21H5C4.44772 21 4 20.5523 4 20V4Z" stroke="#cfd0d3" stroke-width="2" stroke-linecap="round"></path> <path d="M20 8H15V3" stroke="#cfd0d3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M9 17L10 13H11L12 17" stroke="#cfd0d3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M9.5 16L11.5 16" stroke="#cfd0d3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M14 13V17" stroke="#cfd0d3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
          </span>
          <span class="menu-text">AI 노트 키워드 전환</span>
        </button>
        <button class="menu-item" (click)="loadGraph('note-keyword')">
          <span class="menu-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M17.8321 9.5547C18.1384 9.09517 18.0142 8.4743 17.5547 8.16795C17.0952 7.8616 16.4743 7.98577 16.168 8.4453L13.3925 12.6085L10.0529 10.3542C9.421 9.92768 8.55941 10.1339 8.18917 10.8004L6.12584 14.5144C5.85763 14.9971 6.03157 15.6059 6.51436 15.8742C6.99714 16.1424 7.60594 15.9684 7.87416 15.4856L9.56672 12.439L12.8571 14.66C13.4546 15.0634 14.2662 14.9035 14.6661 14.3036L17.8321 9.5547Z" fill="#cfd0d3"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M7 2C4.23858 2 2 4.23858 2 7V17C2 19.7614 4.23858 22 7 22H17C19.7614 22 22 19.7614 22 17V7C22 4.23858 19.7614 2 17 2H7ZM4 7C4 5.34315 5.34315 4 7 4H17C18.6569 4 20 5.34315 20 7V17C20 18.6569 18.6569 20 17 20H7C5.34315 20 4 18.6569 4 17V7Z" fill="#cfd0d3"></path> </g></svg>
          </span>
          <span class="menu-text">노트-키워드 그래프</span>
        </button>

        <button class="menu-item" (click)="loadGraph('keyword-only')">
          <span class="menu-icon">
             <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M17.8321 9.5547C18.1384 9.09517 18.0142 8.4743 17.5547 8.16795C17.0952 7.8616 16.4743 7.98577 16.168 8.4453L13.3925 12.6085L10.0529 10.3542C9.421 9.92768 8.55941 10.1339 8.18917 10.8004L6.12584 14.5144C5.85763 14.9971 6.03157 15.6059 6.51436 15.8742C6.99714 16.1424 7.60594 15.9684 7.87416 15.4856L9.56672 12.439L12.8571 14.66C13.4546 15.0634 14.2662 14.9035 14.6661 14.3036L17.8321 9.5547Z" fill="#cfd0d3"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M7 2C4.23858 2 2 4.23858 2 7V17C2 19.7614 4.23858 22 7 22H17C19.7614 22 22 19.7614 22 17V7C22 4.23858 19.7614 2 17 2H7ZM4 7C4 5.34315 5.34315 4 7 4H17C18.6569 4 20 5.34315 20 7V17C20 18.6569 18.6569 20 17 20H7C5.34315 20 4 18.6569 4 17V7Z" fill="#cfd0d3"></path> </g></svg>
           </span>
          <span class="menu-text">키워드 그래프</span>
        </button>

        <!-- 연결 끊기 -->
        <button class="menu-item danger" (click)="onClickDisconnect()">
          <span class="menu-icon">
            <!-- 연결 끊기 아이콘 (SVG 그대로) -->
            <svg viewBox="0 0 36 36" width="32px" height="32px"  xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12.17,6A6.21,6.21,0,0,0,6,11H2.13v2H6a6.23,6.23,0,0,0,6.21,5H17V6ZM15.1,16H12.17a4.2,4.2,0,0,1-4.31-4,4.17,4.17,0,0,1,4.31-4H15.1Z"
                fill="#cfd0d3" />
              <path
                d="M33.92,23H30.14a6.25,6.25,0,0,0-6.21-5H19v2H14a1,1,0,1,0,0,2h5v4H14a1,1,0,0,0-1,1,1,1,0,0,0,1,1h5v2h4.94a6.23,6.23,0,0,0,6.22-5h3.76Zm-10,5H21V20h2.94a4.17,4.17,0,0,1,4.31,4A4.17,4.17,0,0,1,23.94,28Z"
                fill="#cfd0d3" />
            </svg>
          </span>
          <span class="menu-text">연결 끊기</span>
        </button>
      </div>
      <!-- 간이 confirm -->
      <div class="graph-menu confirm-box" *ngIf="isDisconnectConfirmOpen" (click)="$event.stopPropagation()">
        <div class="confirm-text">
          이 장치에서 API연결을 끊겠습니까?
        </div>

        <div class="confirm-actions">
          <button class="confirm-btn yes" (click)="confirmDisconnect()">
            예
          </button>
          <button class="confirm-btn no" (click)="cancelDisconnect()">
            아니요
          </button>
        </div>
      </div>

      <button class="graph-menu-btn" (click)="openGraphMenu($event)">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
          <g id="SVGRepo_iconCarrier">
            <path
              d="M9 12C9 12.5523 8.55228 13 8 13C7.44772 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11C8.55228 11 9 11.4477 9 12Z"
              fill="#565656"></path>
            <path
              d="M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z"
              fill="#565656"></path>
            <path
              d="M16 13C16.5523 13 17 12.5523 17 12C17 11.4477 16.5523 11 16 11C15.4477 11 15 11.4477 15 12C15 12.5523 15.4477 13 16 13Z"
              fill="#565656"></path>
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12.0574 1.25H11.9426C9.63424 1.24999 7.82519 1.24998 6.41371 1.43975C4.96897 1.63399 3.82895 2.03933 2.93414 2.93414C2.03933 3.82895 1.63399 4.96897 1.43975 6.41371C1.24998 7.82519 1.24999 9.63422 1.25 11.9426V12.0574C1.24999 14.3658 1.24998 16.1748 1.43975 17.5863C1.63399 19.031 2.03933 20.1711 2.93414 21.0659C3.82895 21.9607 4.96897 22.366 6.41371 22.5603C7.82519 22.75 9.63423 22.75 11.9426 22.75H12.0574C14.3658 22.75 16.1748 22.75 17.5863 22.5603C19.031 22.366 20.1711 21.9607 21.0659 21.0659C21.9607 20.1711 22.366 19.031 22.5603 17.5863C22.75 16.1748 22.75 14.3658 22.75 12.0574V11.9426C22.75 9.63423 22.75 7.82519 22.5603 6.41371C22.366 4.96897 21.9607 3.82895 21.0659 2.93414C20.1711 2.03933 19.031 1.63399 17.5863 1.43975C16.1748 1.24998 14.3658 1.24999 12.0574 1.25ZM3.9948 3.9948C4.56445 3.42514 5.33517 3.09825 6.61358 2.92637C7.91356 2.75159 9.62177 2.75 12 2.75C14.3782 2.75 16.0864 2.75159 17.3864 2.92637C18.6648 3.09825 19.4355 3.42514 20.0052 3.9948C20.5749 4.56445 20.9018 5.33517 21.0736 6.61358C21.2484 7.91356 21.25 9.62177 21.25 12C21.25 14.3782 21.2484 16.0864 21.0736 17.3864C20.9018 18.6648 20.5749 19.4355 20.0052 20.0052C19.4355 20.5749 18.6648 20.9018 17.3864 21.0736C16.0864 21.2484 14.3782 21.25 12 21.25C9.62177 21.25 7.91356 21.2484 6.61358 21.0736C5.33517 20.9018 4.56445 20.5749 3.9948 20.0052C3.42514 19.4355 3.09825 18.6648 2.92637 17.3864C2.75159 16.0864 2.75 14.3782 2.75 12C2.75 9.62177 2.75159 7.91356 2.92637 6.61358C3.09825 5.33517 3.42514 4.56445 3.9948 3.9948Z"
              fill="#565656"></path>
          </g>
        </svg>
      </button>
    </div>
  </div>
</div>